(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{881:function(e,n,t){"use strict";t(5893),t(7294),t(3781);var a=t(8951),r=t.n(a);r().image,r().placeholder},3071:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var a=t(6265),r=t(5893),o=t(809),c=t.n(o),i=t(2447),s=t(4121),l=t(7294),u=(t(881),t(3670)),d=t.n(u),p=t(4885),_=t(221),f=t(9669),m=t.n(f),g=t(9832),h=t(8502),v=t(282),x=t(8633),j=t(5152),b=t(6455),w=t.n(b);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=d().wrapper,I=(d().landing,d().landingText,d().landingImage,d().landingNavigationWrapper,d().childcom),y=d().iconMenu,k=d().componet,D=d().center,P=(0,j.default)((function(){return Promise.all([t.e(269),t.e(174)]).then(t.bind(t,9174))}),{ssr:!1,loadableGenerated:{webpack:function(){return[9174]},modules:["..\\routes\\location\\Location.component.jsx -> ./map"]}}),L=function(){var e=(0,h.Z)(),n=(0,x.kP)(),t=(0,s.Z)(n,2),a=t[0],o=(t[1],l.useState()),u=(0,s.Z)(o,2),d=u[0],f=u[1],j=l.useState(),b=(0,s.Z)(j,2),N=b[0],L=b[1],A=l.useState(null),Z=(0,s.Z)(A,2),C=Z[0],M=Z[1],G=function(){var n=(0,i.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(a.user.name),n.next=3,m().get("https://ess.aapico.com/users?username=".concat(a.user.name)).then(function(){var n=(0,i.Z)(c().mark((function n(t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t.data[0].id),n.next=3,m().put("https://ess.aapico.com/users/".concat(t.data[0].id),{location:{address:"".concat(d.tambon_e,",").concat(d.amphoe_e,",").concat(d.province_e,",").concat(d.postcode),coordinates:{lat:e.latitude,lon:e.longitude},hospital:C}}).then((function(e){w().fire({icon:"success",title:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",showConfirmButton:!1,timer:1500})}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return l.useEffect((0,i.Z)(c().mark((function n(){var t,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=function(){var n=(0,i.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m().get("https://maps.powermap.live/api/v2/map/reverse_geocode_hospital?lat=".concat(e.latitude,"&lng=").concat(e.longitude,"&radius=20&limit=10&offset=0&access_token=b378c575291af30a29f59919fd7e7e4c012d45c4")).then((function(e){return e.data.data}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a=function(){var n=(0,i.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m().get("https://search.map.powermap.in.th/api/v2/map/reverse_geocode?lat=".concat(e.latitude,"&lng=").concat(e.longitude,"&sort=d&&access_token=b378c575291af30a29f59919fd7e7e4c012d45c4")).then((function(e){return e}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.loading||(t().then((function(e){L(e),M(e[0].name_t)})),a().then((function(e){f(e.data.data[0])})));case 3:case"end":return n.stop()}}),n)}))),[e.loading]),console.log(e),(0,r.jsx)("div",{className:E,children:(0,r.jsxs)("div",{className:I,style:{fontFamily:"Bai Jamjuree",overflowX:"hidden",color:"black"},children:[(0,r.jsx)("div",{style:{},className:"text-center w-screen h-2/5",children:e.latitude&&(0,r.jsx)(P,{lat:e.latitude,lon:e.longitude})}),(0,r.jsxs)("div",{className:k,style:{backgroundColor:"#ECECED"},children:[(0,r.jsxs)("div",{className:" flex items-center justify-center",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(g.Z,{className:y})}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"".concat(D),children:(0,r.jsxs)("div",{className:"px-4",children:[(0,r.jsx)("p",{className:"font-bold pt-2",children:"My Location"}),d?(0,r.jsxs)("p",{className:"mt-3",children:[d.tambon_e,",",d.amphoe_e,",",d.province_e,",",d.postcode]}):null,(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:"w-ful h-0.5 bg-black"}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{className:"font-bold",children:"Near Hospital"}),(0,r.jsx)("div",{children:N&&(0,r.jsx)(_.ZP,{onChange:function(e,n){return M(n)},id:"free-solo-demo",freeSolo:!0,defaultValue:N[0].name_t,options:N&&N.map((function(e){return e.name_t})),renderInput:function(e){return(0,r.jsx)(p.Z,O(O({},e),{},{label:"\u0e42\u0e23\u0e07\u0e1e\u0e22\u0e32\u0e1a\u0e32\u0e25",margin:"normal"}))}})})]})})})]}),(0,r.jsxs)("div",{className:"mt-2",children:[" ",(0,r.jsx)(v.Z,{onClick:G,variant:"contained",color:"primary",children:"Submit"})]})]})]})})}},5767:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/location",function(){return t(3071)}])},8951:function(e){e.exports={image:"Image_image__1DE1A",imageContent:"Image_imageContent__2Beq2",placeholder:"Image_placeholder__3EwrN",IMAGE_LOADING:"Image_IMAGE_LOADING__1X8DB",placeholderAnimation:"Image_placeholderAnimation__3GrfH",IMAGE_LOADED:"Image_IMAGE_LOADED__3q7yg",IMAGE_NOT_FOUND:"Image_IMAGE_NOT_FOUND__1r1wC",IMAGE_NOT_SPECIFIED:"Image_IMAGE_NOT_SPECIFIED__1PX6P"}},3670:function(e){e.exports={wrapper:"Location_wrapper__3Pcmi",iconMenu:"Location_iconMenu__10XDz",center:"Location_center__3EFgf",componet:"Location_componet__1Rkgd",childcom:"Location_childcom__LxXfP",landing:"Location_landing__2Ya9-",landingText:"Location_landingText__3xygN",landingNavigationWrapper:"Location_landingNavigationWrapper__20HDy",landingImage:"Location_landingImage__2XMn0"}}},function(e){e.O(0,[883,809,774,888,179],(function(){return n=5767,e(e.s=n);var n}));var n=e.O();_N_E=n}]);